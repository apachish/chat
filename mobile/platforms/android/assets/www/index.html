<html>
    <head>
        <title>Chat :-D</title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
        <link href="css/icon.css" rel="stylesheet">
        <link href="css/materialize.min.css" rel="stylesheet">
        <link href="css/custom.css" rel="stylesheet">
    </head>
    <body>
        <div class="img-loading" ></div>
        <div id="login" style="display: none;">
            <div class="start-page all-page fix-height" id="start-page">
                <div class="start-page-header page-header">
                    <img src="img/1.svg" />
                </div>
                <div class="ui-content page-content start-page-section">
                    <p>Welcome to official <span style="color: #112534;font-weight: bold;">Aseman</span> app.</p>
                    <p style="font-weight: bold;">Its fast and secure.</p>
                </div>
                <div style="display: none;" class="ui-content page-content enter-number-section">
                    <p style="font-weight: bold;">Your Phone</p>
                    <div style="">
                        <p>Please confirm your country code and enter</p>
                        <p>your phone number</p>
                        <div class="row" style="text-align: center; margin-top: 20px;">
                            <input id="country" type="text" value="Iran +98" />
                        </div>
                        <div class="row" style="text-align: center;margin-top: 15px;">
                            <input type="hidden" value="false" id="check_code">
                            <div style="width: 170px;position: relative;margin: 0 auto;">
                                <input type="text" value="" id="telephon" float: left;" />
                                <a style="display: none;"  class="btn last-btn small-next">Done</a>
                            </div>
                        </div>
                    </div>
                </div>
                <div style="display: none;" class="ui-content page-content verification-code-section">
                    <p>verification code is not sent? <a class="retry" href="#"><b>Retry</b></a></p>
                    <p>we've sent an SMS with an activation code to your phone  <span id="tel"></span></p>
                    <p style="font-weight: bold;">Enter Verification Code</p>
                    <div class="row" style="text-align: center; margin-top: 20px;">
                        <input type="text" id="code" placeholder="verification code" />
                    </div>
                </div>
                <div class="start-page-footer page-footer">
                    <a  class="btn start-message-btn last-btn start-page-section">Start Messaging</a>
                    <a style="display: none;" id="login-submit"  class="btn enter-number-btn last-btn login-submit">Next</a>
                </div>
             </div>
        </div>
        <div id="main" style="display: none">
            <header>
                <nav class="top-nav">
                        <div class="container header-data">
                            <a href="#" data-activates="slide-out" class="button-collapse menu-main" style="display: block"><i class="small material-icons">menu</i></a>
                            <div class="nav-wrapper"><a class="page-title"><img src="http://chat.asemanapps.ir:4000/img/1.svg" class="logo-img"></a></div>
                            <i class="material-icons back-icon hide">reply</i>
                        </div>
                </nav>
                <ul class="side-nav" id="slide-out">
                    <li class="bold"><a class="waves-effect waves-teal modal-trigger "  href="#new-group-modal" id="new-group">New Group</a></li>
                    <li class="bold"><a class="waves-effect waves-teal" id="chat-list">Chat List</a></li>
                    <li class="bold "><a class="waves-effect waves-teal" id="contacts" >Contact</a></li>
                    <li class="bold "><a class="waves-effect waves-teal" id="profile">Profile</a></li>
                    <li class="bold"><a class="waves-effect waves-teal" id="logout">Logout</a></li>
                </ul>
            </header>
            <main><div class="container">
                    <div class="row">
                     <div class="s12">
                         <div class="row">
                             <div class="col l3 m3 s12 group-contain contain">
                                 <ul id="Room">

                                 </ul>
                             </div>
                             <div class="col l9 m9 s12 chat chat-contain contain">
                                 <div id="chat">
                                     <div class="messages-wrapper">
                                         <ul class="messages-list">
                                         </ul>
                                     </div>
                                     <div class="input-wrapper">
                                         <form id="form" action="" enctype="multipart/form-data">
                                             <input id="roomnow" type="hidden" readonly="readonly"  />
                                             <input id="contact" type="hidden" readonly="readonly"  />

                                             <input id="namecontact" type="hidden" readonly="readonly"  />
                                             <input type="hidden" id="user_online" readonly="readonly" >
                                             <input id="session" type="hidden" readonly="readonly"  />
                                             <input id="emojii" type="hidden"  value=""/>
                                             <input id="colorStyle" type="color" placeHolder='#000' title="font color" class="hide" />
                                             <div id="emojiWrapper">
                                             </div>
                                             <div class="action-btn-row">
                                                 <div class="action-btn-div">
                                                    <button id="emoji"  class="btn action-btn left insert_emoticon"><i class="material-icons">insert_emoticon</i></button>
                                                    <input id="m"  autocomplete="off" class="left" />
                                                    <button class="btn action-btn send-btn right" style="display: none;"><i class="material-icons send-icon">send</i></button> 
                                                   <div class="attach-file-div right">
                                                       <i class="material-icons attach-icon">attach_file</i>
                                                       <span class="btn btn-success fileinput-button"  title="select file">
                                                         <input id="fileupload" type="file" name='fileUploaded'  >
                                                         <div id="select">Select files...</div>
                                                       </span>
                                                   </div>
                                                </div>
                                             </div>
                                         </form>
                                     </div>
                                 </div>
                                 <div class="form-profile" style="margin-top: 100px; width : 400px; margin-left : 50px;">
                                     <input type="text" id="name" placeholder="Name" class="form-control"><br>
                                     <input type="text" id="lastname" placeholder="LastName" class="form-control"><br>
                                     <input type="text" id="telephon_number" value=""  readonly="readonly" class="form-control"><br>
                                     <input type="hidden" id="avatar" placeholder="Avatar" class="form-control"><br>
                                     <div id="list_avatar">
                                         <div class="avatar-thumb">
                                             <img src="http://chat.asemanapps.ir:4000/img/avatars/Avatar1.jpg" class="avatar"  id="Avatar1" />
                                         </div>
                                         <div class="avatar-thumb">
                                             <img src="http://chat.asemanapps.ir:4000/img/avatars/Avatar2.jpg"  class="avatar" id="Avatar2" />
                                         </div>
                                         <div class="avatar-thumb">
                                             <img src="http://chat.asemanapps.ir:4000/img/avatars/Avatar3.jpg" class="avatar" id="Avatar3" />
                                         </div>
                                         <div class="avatar-thumb">
                                             <img src="http://chat.asemanapps.ir:4000/img/avatars/Avatar4.jpg" class="avatar" id="Avatar4" />
                                         </div>
                                         <div class="avatar-thumb">
                                             <img src="http://chat.asemanapps.ir:4000/img/avatars/Avatar5.jpg" class="avatar" id="Avatar5" />
                                         </div>
                                         <div class="avatar-thumb">
                                             <img src="http://chat.asemanapps.ir:4000/img/avatars/Avatar6.jpg" class="avatar" id="Avatar6" />
                                         </div>
                                         <div class="avatar-thumb">
                                             <img src="http://chat.asemanapps.ir:4000/img/avatars/Avatar7.jpg" class="avatar" id="Avatar7" />
                                         </div>
                                         <div class="avatar-thumb">
                                             <img src="http://chat.asemanapps.ir:4000/img/avatars/Avatar8.jpg"  class="avatar" id="Avatar8" />
                                         </div>
                                         <div class="avatar-thumb">
                                             <img src="http://chat.asemanapps.ir:4000/img/avatars/Avatar9.jpg"  class="avatar" id="Avatar9" />
                                         </div>
                                         <div class="avatar-thumb">
                                             <img src="http://chat.asemanapps.ir:4000/img/avatars/Avatar10.jpg"  class="avatar" id="Avatar10" />
                                         </div>
                                         <div class="avatar-thumb">
                                             <img src="http://chat.asemanapps.ir:4000/img/avatars/Avatar11.jpg"  class="avatar" id="Avatar11" />
                                         </div>
                                         <div class="avatar-thumb">
                                             <img src="http://chat.asemanapps.ir:4000/img/avatars/Avatar12.jpg"  class="avatar" id="Avatar12" />
                                         </div>
                                         <div class="avatar-thumb">
                                             <img src="http://chat.asemanapps.ir:4000/img/avatars/Avatar14.jpg"  class="avatar" id="Avatar13" />
                                         </div>
                                         <div class="avatar-thumb">
                                             <img src="http://chat.asemanapps.ir:4000/img/avatars/Avatar15.jpg"  class="avatar" id="Avatar14" />
                                         </div>
                                         <div class="chat-box"></div>
                                     </div>
                                     <input type="button" id="login-edit" value="UpDate" class="btn btn-primary">
                                 </div>
                             </div>
                         </div>
                     </div>
                </div>
      </div>
        </main>
    </div>
    <div id="new-group-modal" class="modal modal-fixed-footer">
      <div class="modal-content">
          <p>Enter group name</p>
          <input type="text" id="group-name" />
      </div>
      <div class="modal-footer">
          <a class="modal-action modal-close waves-effect waves-blue btn-flat create-group m-btn" href="#!">create</a>
          <a class="modal-action modal-close waves-effect waves-red btn-flat m-btn" href="#!">cancel</a>
            </div>
    </div>
    <script src="js/jquery.min.js"></script>
    <script src="js/materialize.min.js"></script>
            <script type="text/javascript" src="cordova.js"></script>
    <script src="js/socket.io-1.2.0.js"></script>

    <script src="js/custom.js"></script>
    <script src="js/chatroom.js"></script>

    <script src="js/chat.js" ></script>
    <script>
        function loadjscssfile(filename, filetype){
            if (filetype=="js"){ //if filename is a external JavaScript file
                var fileref=document.createElement('script');
                fileref.setAttribute("type","text/javascript");
                fileref.setAttribute("src", filename);
            }
            else if (filetype=="css"){ //if filename is an external CSS file
                var fileref=document.createElement("link")
                fileref.setAttribute("rel", "stylesheet")
                fileref.setAttribute("type", "text/css")
                fileref.setAttribute("href", filename)
            }
            if (typeof fileref!="undefined")
                document.getElementsByTagName("head")[0].appendChild(fileref)
        }
        /**
         * Determine the mobile operating system.
         * This function either returns 'iOS', 'Android' or 'unknown'
         *
         * @returns {String}
         */
        function getMobileOperatingSystem() {
            var userAgent = navigator.userAgent || navigator.vendor || window.opera;

            if( userAgent.match( /iPad/i ) || userAgent.match( /iPhone/i ) || userAgent.match( /iPod/i ) )
            {
                return 'iOS';

            }
            else if( userAgent.match( /Android/i ) )
            {

                return 'Android';
            }
            else
            {
                return 'unknown';
            }
        }
        $(document).ready(function(){
            if(getMobileOperatingSystem()=='Android'){
                    document.addEventListener("deviceready",onDeviceReady,false);
/*
                $.getScript( "cordova.js" )
                        .done(function( script, textStatus ) {
                                            document.addEventListener("deviceready",onDeviceReady,false);
                            console.log('cordova js loaded');
                        })
                        .fail(function( jqxhr, settings, exception ) {
                            alert('Failed to load script');
                        });
*/
                function onDeviceReady(){
                                            console.log('cordova js is working');
                            $.getScript( "js/file.js" )
                        .done(function( script, textStatus ) {
                                                            file();
                        })
                        .fail(function( jqxhr, settings, exception ) {
                            alert('Failed to load script');
                        });
                }
//        loadjscssfile("js/file.js", "js"); //dynamically load and add this .js file
//        loadjscssfile("cordova.js", "js"); //dynamically load and add this .js file

            }else{
                $.getScript( "js/web.js" )
                        .done(function( script, textStatus ) {
                            console.log("load we js");
                        })
                        .fail(function( jqxhr, settings, exception ) {
                            alert('Failed to load script');
                        });
                console.log('web');
//        loadjscssfile("js/web.js", "js"); //dynamically load and add this .js file
            }
        });

    </script>
    </body>
</html>
